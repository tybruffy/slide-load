(function(e){var t={$el:null,offsets:{},farCoords:{},closeCoords:{},transiton:{},defaults:{transition:"bottom",ajax:{url:"/",dataType:"html",type:"POST",data:{}}},_init:function(t,n){t=t||{};e("#pl-loader").remove();this.$el=this._proxy_check(n);this.settings=e.extend(true,{},this.defaults,t);this.$loader=e('<div id="pl-loader" class="loading-screen" />');this._load()},_create_loader:function(){var t=this.$el.clone();this.$loader.html(t);this._set_loader_style();e(document).trigger("pl.clone",[this.$el]);this.$loader.appendTo(".faux-body")},_set_coords:function(){this.offsets=this.$el.offset();this.farCoords=this._get_far_coords(this.$el);this.closeCoords=this._get_close_coords()},_get_close_coords:function(){var t={};t.bottom=e(".faux-body").outerHeight()-this.farCoords.bottom;t.right=e(".faux-body").outerWidth()-this.farCoords.right;t.top=this.offsets.top;t.left=this.offsets.left;return t},_get_far_coords:function(t){coords={};coords.top=e(".faux-body").outerHeight()-this.offsets.top;coords.left=e(".faux-body").outerWidth()-this.offsets.left;coords.bottom=t.outerHeight()+this.offsets.top;coords.right=t.outerWidth()+this.offsets.left;return coords},_set_loader_style:function(){this.$loader.css({height:this.$el.height(),width:this.$el.width()})},_load:function(){var t=this;e.ajax(this.settings.ajax).done(function(e){t._show_content.call(t,e)})},_show_content:function(t){var n=this;this._set_coords();this._create_loader();this._prepare_cntr(t);this.transitions[this.settings.transition].call(this);this.$el.imagesLoaded(function(){n.$el.trigger("pl.animate",[n.$el]);var t=n.$el.fadeTo({duration:750,queue:false},1).animateAuto("height",{duration:500,queue:false});var r=n.$loader.animate(n.transiton,{queue:false,duration:500});e.when(t,r).done(function(){n.$el.removeAttr("style");n._exit()})})},_prepare_cntr:function(t){var n=e(t),r=this.$el.data("load-replace");n=r?this._find_replacemnt(n):n;this.$el.css({height:this.$el.height(),opacity:0});this.$el.html(n)},_proxy_check:function(t){var n=t.data("load-proxy");return e(n).length?e(n):t},_find_replacemnt:function(t){var n=this,r=t;r.each(function(r,i){if(e(this).data("load-replacement")){n._replace_container(e(this));contents=e(this).contents().toArray();t.splice.apply(t,[r,1].concat(contents))}});return t},_replace_container:function(t){var n=t.prop("attributes");self=this;e.each(n,function(){self.$el.attr(this.name,this.value)})},_exit:function(){this.$loader.remove();e(document).trigger("pl.complete",[this.$el])},transitions:{top:function(){this.$loader.css({top:this.closeCoords.top});this.transiton={height:0}},bottom:function(){this.$loader.css({top:this.closeCoords.top,bottom:this.closeCoords.bottom});this.transiton={top:this.farCoords.bottom,height:0}},left:function(){this.$loader.css({top:this.closeCoords.top,left:this.closeCoords.left});this.transiton={left:"-100%"}},right:function(){this.$loader.css({top:this.closeCoords.top,right:this.closeCoords.right});this.transiton={right:"-100%"}}}};e.fn.pushLoad=function(){if(t.transitions[arguments[1]]){config={transition:arguments[1],ajax:{url:arguments[0]}};t._init.call(t,config,this)}else if(typeof arguments[0]==="object"){t._init.call(t,arguments[0],this)}else{e.error("pushLoad has no method "+arguments[0])}return this}})(jQuery)